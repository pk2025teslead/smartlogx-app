{% extends 'userpanel/base_user.html' %}

{% block title %}Attendance Management{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="zoho-page-header" data-aos="fade-down">
    <div>
        <h1 class="zoho-page-title">Attendance Management</h1>
        <p class="zoho-page-subtitle">Manage your leave, comp-off, and work from home requests</p>
    </div>
</div>

<!-- Stats Overview -->
<div class="zoho-stats-grid" data-aos="fade-up" data-aos-delay="100">
    <div class="zoho-stat-card">
        <div class="zoho-stat-icon blue">
            <i class="bi bi-calendar-x"></i>
        </div>
        <div>
            <div class="zoho-stat-value">{{ leave_stats.total }}</div>
            <div class="zoho-stat-label">Leave Requests ({{ month_name }})</div>
        </div>
    </div>
    <div class="zoho-stat-card">
        <div class="zoho-stat-icon green">
            <i class="bi bi-calendar-plus"></i>
        </div>
        <div>
            <div class="zoho-stat-value">{{ compoff_stats.total }}</div>
            <div class="zoho-stat-label">Comp-Off Requests</div>
        </div>
    </div>
    <div class="zoho-stat-card">
        <div class="zoho-stat-icon purple">
            <i class="bi bi-house"></i>
        </div>
        <div>
            <div class="zoho-stat-value">{{ wfh_stats.total }}</div>
            <div class="zoho-stat-label">WFH Requests</div>
        </div>
    </div>
    <div class="zoho-stat-card">
        <div class="zoho-stat-icon yellow">
            <i class="bi bi-hourglass-split"></i>
        </div>
        <div>
            <div class="zoho-stat-value">{{ leave_stats.pending|add:compoff_stats.pending|add:wfh_stats.pending }}</div>
            <div class="zoho-stat-label">Pending Approvals</div>
        </div>
    </div>
</div>

<!-- Modules Grid -->
<div class="zoho-card" data-aos="fade-up" data-aos-delay="200">
    <div class="zoho-card-header">
        <h3 class="zoho-card-title">
            <i class="bi bi-grid-3x3-gap" style="margin-right: 8px; color: var(--zoho-accent);"></i>
            Attendance Modules
        </h3>
    </div>
    <div class="zoho-card-body">
        <div class="module-grid">
            <!-- Leave Information -->
            <a href="{% url 'userpanel:leave_list' %}" class="module-card" data-aos="fade-up" data-aos-delay="100">
                <div class="module-card-icon" style="background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);">
                    <i class="bi bi-calendar-x"></i>
                </div>
                <h4 class="module-card-title">Leave Information</h4>
                <p class="module-card-desc">Request and manage your leave applications</p>
                <div style="margin-top: 12px; display: flex; gap: 12px;">
                    <span class="zoho-badge developer">{{ leave_stats.approved }} Approved</span>
                    <span class="zoho-badge coordinator">{{ leave_stats.pending }} Pending</span>
                </div>
            </a>
            
            <!-- Comp-Off Information -->
            <a href="{% url 'userpanel:compoff_list' %}" class="module-card" data-aos="fade-up" data-aos-delay="200">
                <div class="module-card-icon" style="background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);">
                    <i class="bi bi-calendar-plus"></i>
                </div>
                <h4 class="module-card-title">Sunday Comp-Off</h4>
                <p class="module-card-desc">Log Sunday work and claim compensatory off</p>
                <div style="margin-top: 12px; display: flex; gap: 12px;">
                    <span class="zoho-badge developer">{{ compoff_stats.approved }} Approved</span>
                    <span class="zoho-badge coordinator">{{ compoff_stats.pending }} Pending</span>
                </div>
            </a>
            
            <!-- WFH Information -->
            <a href="{% url 'userpanel:wfh_list' %}" class="module-card" data-aos="fade-up" data-aos-delay="300">
                <div class="module-card-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);">
                    <i class="bi bi-house"></i>
                </div>
                <h4 class="module-card-title">Work From Home</h4>
                <p class="module-card-desc">Request work from home days</p>
                <div style="margin-top: 12px; display: flex; gap: 12px;">
                    <span class="zoho-badge developer">{{ wfh_stats.approved }} Approved</span>
                    <span class="zoho-badge coordinator">{{ wfh_stats.pending }} Pending</span>
                </div>
            </a>
        </div>
    </div>
</div>

<!-- Quick Info -->
<div class="zoho-card" style="margin-top: 24px;" data-aos="fade-up" data-aos-delay="300">
    <div class="zoho-card-header">
        <h3 class="zoho-card-title">
            <i class="bi bi-info-circle" style="margin-right: 8px; color: var(--zoho-neon-blue);"></i>
            Information
        </h3>
    </div>
    <div class="zoho-card-body">
        <div class="zoho-alert info" style="margin-bottom: 0;">
            <i class="bi bi-lightbulb zoho-alert-icon"></i>
            <div class="zoho-alert-content">
                <div class="zoho-alert-title">How it works</div>
                <div class="zoho-alert-text">
                    <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                        <li>Submit your requests through the respective modules</li>
                        <li>All requests require admin approval</li>
                        <li>You can edit or delete pending requests only</li>
                        <li>Approved/Rejected requests cannot be modified</li>
                        <li>Drag table columns to reorder them - your preference is saved automatically</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
